<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç ´å£ä¹‹ç‹ - å¤æ‹³æ³•å¤§æŒ‘æˆ°</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap');

        :root {
            --primary-yellow: #f1c40f; 
            --accent-red: #c0392b;
            --dark-blue: #2c3e50;
            --black: #1a1a1a;
            --white: #ffffff;
            --ig-gradient: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
        }

        body {
            margin: 0;
            /* èƒŒæ™¯è¨­å®šï¼šæµ·å ±åœ– + æ·±è‰²é®ç½© */
            background-image: 
                linear-gradient(rgba(44, 62, 80, 0.85), rgba(44, 62, 80, 0.85)),
                url('delivery.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            background-repeat: no-repeat;
            
            font-family: 'Noto Sans TC', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: var(--black);
            padding: 15px;
            box-sizing: border-box;
        }

        .game-container {
            width: 100%;
            max-width: 550px;
            background: var(--white);
            border: 6px solid var(--black);
            border-radius: 15px;
            box-shadow: 15px 15px 0px rgba(0,0,0,0.4);
            padding: 25px;
            text-align: center;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s;
            z-index: 10;
        }

        /* åœ–ç‰‡å€ */
        .poster-area {
            width: 100%;
            height: 260px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 5px solid var(--black);
            background: #000;
            overflow: hidden;
            position: relative;
            box-shadow: 5px 5px 0px rgba(0,0,0,0.2);
        }

        .poster-area img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            transition: transform 0.5s;
        }

        .poster-area:hover img {
            transform: scale(1.1);
        }

        h1 {
            margin: 5px 0 15px 0;
            color: var(--accent-red);
            font-weight: 900;
            font-size: 2rem;
            text-transform: uppercase;
            text-shadow: 3px 3px 0px var(--primary-yellow), 5px 5px 0px var(--black);
            letter-spacing: 2px;
            line-height: 1.2;
        }

        p { line-height: 1.6; font-weight: 700; font-size: 1.1rem; margin: 10px 0; }

        /* æŒ‰éˆ•æ¨£å¼ */
        .btn {
            display: block;
            width: 100%;
            padding: 15px;
            border: 3px solid var(--black);
            border-radius: 10px;
            font-size: 1.3rem;
            font-weight: 900;
            cursor: pointer;
            color: var(--white);
            background: var(--accent-red);
            box-shadow: 6px 6px 0px var(--black);
            margin-top: 20px;
            transition: all 0.1s;
            position: relative;
            overflow: hidden;
            text-decoration: none;
            box-sizing: border-box;
        }
        .btn:hover:not(:disabled) { transform: translate(-2px, -2px); box-shadow: 8px 8px 0px var(--black); filter: brightness(1.1); }
        .btn:active:not(:disabled) { transform: translate(4px, 4px); box-shadow: 2px 2px 0px var(--black); }
        .btn:disabled { background: #95a5a6; cursor: not-allowed; box-shadow: none; transform: translate(4px, 4px); }

        .btn-ig {
            background: var(--ig-gradient);
            border-color: var(--black);
        }

        /* é¡Œç›®å€ */
        .progress-container {
            display: flex; align-items: center; justify-content: space-between;
            margin-bottom: 15px; font-weight: 900; color: #7f8c8d;
        }
        .progress-bar { 
            flex-grow: 1; height: 12px; background: #eee; 
            border-radius: 6px; overflow: hidden; margin: 0 10px; 
            border: 2px solid var(--black);
        }
        .progress-fill { height: 100%; background: var(--primary-yellow); width: 0%; transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1); }

        .question-box {
            background: #ecf0f1;
            padding: 20px;
            border-radius: 10px;
            border: 3px solid var(--black);
            min-height: 100px;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.3rem; font-weight: 900; line-height: 1.4;
            margin-bottom: 20px;
            position: relative;
        }
        .question-box::after {
            content: ''; position: absolute; bottom: -15px; left: 50%; transform: translateX(-50%);
            border-width: 15px 15px 0; border-style: solid; border-color: var(--black) transparent transparent transparent;
        }
        .question-box::before {
            content: ''; position: absolute; bottom: -9px; left: 50%; transform: translateX(-50%);
            border-width: 12px 12px 0; border-style: solid; border-color: #ecf0f1 transparent transparent transparent; z-index: 1;
        }

        .btn-option {
            background: var(--white); color: var(--black);
            text-align: left; margin-bottom: 12px;
            box-shadow: 4px 4px 0px #bdc3c7;
            border-color: var(--black);
        }
        .btn-option:hover:not(:disabled) { background: #fff5cc; transform: translate(-2px, -2px); box-shadow: 6px 6px 0px #bdc3c7; }
        .btn-option:active:not(:disabled) { transform: translate(2px, 2px); box-shadow: 2px 2px 0px #bdc3c7; }

        .btn-option.correct { 
            background: #2ecc71 !important; color: white; border-color: #27ae60; 
            box-shadow: none; transform: scale(1.02);
        }
        .btn-option.wrong { 
            background: #e74c3c !important; color: white; border-color: #c0392b; 
            opacity: 0.8;
        }

        /* è¼ªç›¤æ¨£å¼ */
        .wheel-wrap { position: relative; width: 260px; height: 260px; margin: 20px auto; }
        .wheel-container {
            width: 100%; height: 100%; border-radius: 50%;
            border: 8px solid var(--black); box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            overflow: hidden; transition: transform 4s cubic-bezier(0.15, 0.8, 0.25, 1);
            position: relative;
            background: conic-gradient(
                #e74c3c 0deg 60deg, #f1c40f 60deg 120deg, #3498db 120deg 180deg, 
                #e74c3c 180deg 240deg, #f1c40f 240deg 300deg, #3498db 300deg 360deg
            );
        }
        .wheel-line {
            position: absolute; top: 0; left: 50%; width: 4px; height: 100%; background: rgba(0,0,0,0.2); transform: translateX(-50%);
        }
        .wheel-line.cross { transform: translateX(-50%) rotate(90deg); }
        .wheel-line.diag1 { transform: translateX(-50%) rotate(60deg); }
        .wheel-line.diag2 { transform: translateX(-50%) rotate(120deg); }

        .wheel-center {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 60px; height: 60px; background: var(--white); 
            border: 5px solid var(--black); border-radius: 50%;
            z-index: 5; display: flex; align-items: center; justify-content: center; 
            font-size: 24px; font-weight: 900; color: var(--accent-red);
            box-shadow: inset 0 0 10px rgba(0,0,0,0.2);
        }
        .pointer {
            position: absolute; top: -25px; left: 50%; transform: translateX(-50%);
            width: 0; height: 0; z-index: 10;
            border-left: 20px solid transparent; border-right: 20px solid transparent;
            border-top: 40px solid var(--black);
            filter: drop-shadow(0 4px 2px rgba(0,0,0,0.3));
        }

        /* è­‰æ›¸æ¨£å¼ */
        .cert-card {
            position: relative; width: 100%; padding-top: 70%; 
            border: 8px double var(--black); border-radius: 5px; 
            margin-top: 20px; box-shadow: 10px 10px 20px rgba(0,0,0,0.3);
            background-color: #fffdf0;
            background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23d4af37' fill-opacity='0.1' fill-rule='evenodd'%3E%3Ccircle cx='3' cy='3' r='3'/%3E%3Ccircle cx='13' cy='13' r='3'/%3E%3C/g%3E%3C/svg%3E");
        }
        .cert-content {
            position: absolute; top: 0; left: 0; bottom: 0; right: 0;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            padding: 20px;
        }
        .cert-border-inner {
            position: absolute; top: 10px; left: 10px; right: 10px; bottom: 10px;
            border: 2px solid #c0392b; border-radius: 2px; pointer-events: none;
        }
        .cert-title { 
            font-size: 1.8rem; font-weight: 900; color: #c0392b; 
            border-bottom: 4px solid #c0392b; margin-bottom: 15px; padding-bottom: 5px;
            letter-spacing: 3px;
        }
        .cert-text { font-size: 1.1rem; margin: 5px 0; font-weight: bold; color: #555; }
        .cert-name { 
            color: #2c3e50; font-size: 2rem; margin: 10px 0; font-weight: 900; 
            font-family: "æ¨™æ¥·é«”", "KaiTi", serif; border-bottom: 2px dashed #999; padding: 0 10px;
        }
        .cert-prize { 
            color: #d35400; font-size: 1.5rem; margin: 15px 0; font-weight: 900; 
            background: #ffeaa7; padding: 5px 15px; border-radius: 5px; 
            transform: rotate(-2deg); box-shadow: 3px 3px 0 rgba(0,0,0,0.1);
        }
        .cert-stamp {
            position: absolute; bottom: 20px; right: 20px;
            width: 90px; height: 90px; border: 5px solid #c0392b; border-radius: 50%;
            color: #c0392b; display: flex; flex-direction: column; justify-content: center; align-items: center;
            font-weight: 900; transform: rotate(-20deg); font-size: 1.2rem;
            background: rgba(255, 255, 255, 0.8); 
            box-shadow: 0 0 0 2px rgba(192, 57, 43, 0.2);
            font-family: "æ¨™æ¥·é«”", "KaiTi", serif;
        }
        .cert-stamp span { font-size: 0.8rem; display: block; margin-top: 2px;}

        .input-control {
            width: 100%; padding: 15px; border: 4px solid var(--black); border-radius: 10px;
            font-size: 1.2rem; box-sizing: border-box; text-align: center; margin-bottom: 15px;
            font-weight: bold; background: #fff;
        }
        .input-control:focus { outline: none; background: #fdfefe; border-color: var(--primary-yellow); }

        .footer-text {
            margin-top: 25px;
            padding-top: 15px;
            border-top: 2px dashed #eee;
            font-size: 1.1rem;
            font-weight: 900;
            color: var(--accent-red);
            text-shadow: 1px 1px 0px var(--primary-yellow);
            letter-spacing: 1px;
        }

        .hidden { display: none !important; }
        .shake { animation: shake 0.5s; }
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }

        #confetti-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 999;
        }
    </style>
</head>
<body>

    <canvas id="confetti-canvas"></canvas>

    <div class="game-container" id="game-card">
        
        <div id="screen-welcome">
            <div class="poster-area">
                <img src="delivery.jpg" alt="ç ´å£ä¹‹ç‹æµ·å ±" onerror="this.src='https://placehold.co/600x400/2c3e50/ffffff?text=Missing+delivery.jpg';">
            </div>
            <h1>ç ´å£ä¹‹ç‹<br>çŸ¥è­˜å¤§æŒ‘æˆ°</h1>
            
            <p>ã€Œæƒ³å­¸å¤æ‹³æ³•ï¼Ÿå…ˆéæˆ‘é€™é—œï¼ã€</p>
            <p style="font-size: 0.9rem; color:#7f8c8d; background:#ecf0f1; display:inline-block; padding:5px 10px; border-radius:20px;">
                éœ€ç­”å° <span style="color:#c0392b;">8</span> é¡Œä»¥ä¸Šæ‰èƒ½ç²å¾—è­‰æ›¸
            </p>

            <button id="btn-follow-ig" class="btn btn-ig" onclick="followIG()">
                ğŸ‘‰ Step 1ï¼šå…ˆè¿½è¹¤ IG å–å¾—è³‡æ ¼
            </button>
            
            <button id="btn-start-game" class="btn hidden" onclick="startGame()">
                ğŸ”¥ Step 2ï¼šé–‹å§‹ç‰¹è¨“
            </button>
        </div>

        <div id="screen-game" class="hidden">
            <div class="progress-container">
                <span>START</span>
                <div class="progress-bar"><div id="q-progress" class="progress-fill"></div></div>
                <span>GOAL</span>
            </div>
            <div style="text-align:right; font-size:0.8rem; color:#95a5a6; margin-bottom:5px;">
                Question <span id="q-current" style="color:#000; font-size:1.2rem;">1</span> / 10
            </div>
            <div class="question-box" id="q-text">é¡Œç›®è¼‰å…¥ä¸­...</div>
            <div id="options-box"></div>
        </div>

        <div id="screen-fail" class="hidden">
            <div style="font-size:5rem; margin-bottom:10px;">ğŸ—‘ï¸</div>
            <h2 style="color:#c0392b; font-size:2rem; margin:0;">æŒ‘æˆ°å¤±æ•—</h2>
            <p>ä½ åªç­”å°äº† <span id="fail-score" style="font-weight:900; font-size:1.8rem;">0</span> é¡Œã€‚</p>
            <div style="background:#f0f0f0; padding:15px; border-radius:10px; margin:20px 0; border-left:5px solid #7f8c8d;">
                <p style="margin:0; font-style:italic;">ã€Œå¤§å¸«å…„èªªå¾—å°ï¼Œåœ¨åº§çš„å„ä½...ã€</p>
            </div>
            <button class="btn" style="background:#7f8c8d; border-color:#555;" onclick="location.reload()">ğŸ”„ å›å»é‡ç·´</button>
        </div>

        <div id="screen-wheel" class="hidden">
            <h2 style="color:#27ae60; margin:0;">ğŸ‰ æ­å–œé€šéç‰¹è¨“ï¼</h2>
            <p>ä½ ç­”å°äº† <span id="pass-score" style="font-weight:900; font-size:1.5rem; color:#d35400;"></span> é¡Œï¼</p>
            <p>æ­£åœ¨è£½ä½œè­‰æ›¸...</p>
            
            <div class="wheel-wrap">
                <div class="pointer"></div>
                <div id="wheel" class="wheel-container">
                    <div class="wheel-line"></div>
                    <div class="wheel-line cross"></div>
                    <div class="wheel-line diag1"></div>
                    <div class="wheel-line diag2"></div>
                </div>
                <div class="wheel-center">ç</div>
            </div>
            
            <button id="spin-btn" class="btn" style="background:#2c3e50;" onclick="spinWheel()">ğŸ‘Š å•Ÿå‹•ç„¡æ•µé¢¨ç«è¼ª</button>
        </div>

        <div id="screen-input" class="hidden">
            <h2>âœï¸ ç•™ä¸‹å¤§å</h2>
            <p>è«‹è¼¸å…¥ä½ æƒ³å°åœ¨è­‰æ›¸ä¸Šçš„ç¨±è™Ÿ<br><span style="font-size:0.9rem; color:#7f8c8d;">(ä¾‹å¦‚ï¼šè’™é¢åŠ è²è²“)</span></p>
            <input type="text" id="user-name" class="input-control" placeholder="è«‹è¼¸å…¥åå­—..." maxlength="10">
            <button class="btn" onclick="generateCertificate()">âœ… ç¢ºèªè£½ä½œè­‰æ›¸</button>
        </div>

        <div id="screen-cert" class="hidden">
            <h2 style="margin:5px 0;">ğŸ“¸ è«‹æˆªåœ–åˆ†äº«</h2>
            
            <div class="cert-card">
                <div class="cert-border-inner"></div>
                <div class="cert-content">
                    <div class="cert-title">ğŸ“œ å¤æ‹³æ³•çµæ¥­è­‰æ›¸</div>
                    <div class="cert-text">èŒ²è­‰æ˜å¼Ÿå­</div>
                    <div class="cert-name" id="cert-name"></div>
                    <div class="cert-text">é€šéåœ°ç„å¼ç‰¹è¨“ï¼Œç‰¹æ­¤é ’ç™¼</div>
                    <div class="cert-prize">æ¦®ç²ï¼šå¤æ‹³æ³•å‚³äºº</div>
                    <div class="cert-text" style="font-size:0.8rem; margin-top:auto; color:#7f8c8d; width:100%; text-align:right;">
                        ç™¼è­‰æ—¥æœŸï¼š<span id="cert-date"></span>
                    </div>
                    <div class="cert-stamp">å¤æ‹³æ³•<br><span>åˆæ ¼</span></div>
                </div>
            </div>

            <a href="https://www.facebook.com/djkinple" target="_blank" class="btn" style="background:#3b5998; margin-top:20px;">
                ğŸ’¬ å‰å¾€ FB ç•™è¨€
            </a>
            
            <a href="https://www.instagram.com/kinpletw/" target="_blank" class="btn btn-ig" style="margin-top:10px;">
                ğŸ“¸ å‰å¾€ IG åˆ†äº«/ç§è¨Š
            </a>

            <button class="btn" style="background:#95a5a6; margin-top:10px; font-size:1rem; padding:10px;" onclick="location.reload()">ğŸ  å›é¦–é </button>
        </div>

        <div class="footer-text">
            ğŸ‘‰ ã€Š#ç ´å£ä¹‹ç‹ã€‹ ğŸğŸ.ğŸğŸ” ä¸­æ–‡ç‰ˆ é‡æº«ç¶“å…¸ ğŸ‘ˆ
        </div>

    </div>

    <script>
        // è¨­å®š
        const TOTAL_QUESTIONS_TO_ASK = 10;
        const PASS_THRESHOLD = 8;
        
        // é¡Œåº« (ç„¡è®Šå‹•)
        const pool = [
            { q: "ã€Šç ´å£ä¹‹ç‹ã€‹ä¸­ï¼Œä¸»è§’ä½•é‡‘éŠ€çš„å¤–è™Ÿæ˜¯ä»€éº¼ï¼Ÿ", options: ["å¤–è³£ä»”", "é€ä¿¡ä»”", "è³£é­šä»”", "æƒåœ°åƒ§"], ans: "å¤–è³£ä»”" },
            { q: "æ–·æ°´æµå¤§å¸«å…„æœ€ç¶“å…¸çš„å°è©æ˜¯ï¼Ÿ", options: ["åœ¨åº§çš„å„ä½éƒ½æ˜¯åƒåœ¾", "æˆ‘è¦æ‰“åå€‹", "é‚„åŸéšéšæ‹³", "æˆ‘ä¹Ÿè®€éå…©å¹´æ›¸"], ans: "åœ¨åº§çš„å„ä½éƒ½æ˜¯åƒåœ¾" },
            { q: "ä½•é‡‘éŠ€ç‚ºäº†æ‰“æ•—å¤§å¸«å…„ï¼Œå­¸äº†ä»€éº¼çµ•æ‹›ï¼Ÿ", options: ["ç„¡æ•µé¢¨ç«è¼ª", "å¦‚ä¾†ç¥æŒ", "å¤©æ®˜è…³", "é‚„æˆ‘æ¼‚æ¼‚æ‹³"], ans: "ç„¡æ•µé¢¨ç«è¼ª" },
            { q: "é­”é¬¼ç­‹è‚‰äººï¼ˆé”å”ï¼‰é–‹çš„é›œè²¨åº—å«ä»€éº¼åå­—ï¼Ÿ", options: ["æ‡¦å¤«æ•‘æ˜Ÿ", "ç²¾è‹±ä¸­å¿ƒ", "å¼·è€…ä¸–ç•Œ", "æœ‰åŠŸç·´é›œè²¨"], ans: "æ‡¦å¤«æ•‘æ˜Ÿ" },
            { q: "ä½•é‡‘éŠ€è’™é¢è¡Œä¿ ä»—ç¾©æ™‚ï¼Œæˆ´çš„æ˜¯ä»€éº¼é¢å…·ï¼Ÿ", options: ["åŠ è²è²“", "èœ˜è››äºº", "è™è ä¿ ", "é¹¹è›‹è¶…äºº"], ans: "åŠ è²è²“" },
            { q: "å¥³ä¸»è§’é˜¿éº—æœ€å–œæ­¡çš„æ­Œæ˜Ÿæ˜¯èª°ï¼Ÿ", options: ["å¼µå­¸å‹", "åŠ‰å¾·è¯", "é»æ˜", "éƒ­å¯ŒåŸ"], ans: "å¼µå­¸å‹" },
            { q: "å¤§å¸«å…„æ˜¯å±¬æ–¼å“ªå€‹é–€æ´¾çš„ï¼Ÿ", options: ["ç©ºæ‰‹é“", "æŸ”é“", "åŠé“", "è·†æ‹³é“"], ans: "ç©ºæ‰‹é“" },
            { q: "ä½•é‡‘éŠ€é€å¤–è³£çš„é¤å»³åå­—å«ï¼Ÿ", options: ["æ¦®è¨˜å†°å®¤", "å–œåŠ‡ä¹‹ç‹", "é£Ÿç¥é¤å»³", "é¾é–€å®¢æ£§"], ans: "æ¦®è¨˜å†°å®¤" },
            { q: "é­”é¬¼ç­‹è‚‰äººè‡ªç¨±èªè­˜å“ªä½æ­¦è¡“å®—å¸«ï¼Ÿ", options: ["æå°é¾", "è‘‰å•", "éœå…ƒç”²", "é»ƒé£›é´»"], ans: "æå°é¾" },
            { q: "é»‘ç†Šä¸»å°‡æ˜¯ç”¨ä»€éº¼æ‹›å¼æ”»æ“Šä½•é‡‘éŠ€çš„ï¼Ÿ", options: ["æ’å±±å€’æµ·", "å¥ªå‘½å‰ªåˆ€è…³", "æ˜‡é¾æ‹³", "æ³¢å‹•æ‹³"], ans: "æ’å±±å€’æµ·" },
            { q: "ä½•é‡‘éŠ€ç”¨å“ªä¸€æ‹›é–ä½äº†å¤§å¸«å…„ï¼Ÿ", options: ["é‡‘è›‡çºæ²¾æ‰‹", "åå­—å›º", "è£¸çµ", "é–å–‰åŠŸ"], ans: "é‡‘è›‡çºæ²¾æ‰‹" },
            { q: "é”å”èªªä»–è¢«ç¨±ç‚ºã€Œé­”é¬¼ç­‹è‚‰äººã€æ˜¯å› ç‚ºï¼Ÿ", options: ["è‚Œè‚‰å¤ªç™¼é”", "é•·å¾—åƒé­”é¬¼", "å¿ƒåœ°å–„è‰¯", "ä»¥å‰æ˜¯å¥ç¾å…ˆç”Ÿ"], ans: "è‚Œè‚‰å¤ªç™¼é”" },
            { q: "ä½•é‡‘éŠ€ç¬¬ä¸€æ¬¡å’Œå¤§å¸«å…„å°æ±ºæ˜¯åœ¨å“ªè£¡ï¼Ÿ", options: ["åœè»Šå ´", "æ“‚å°", "æ•™å®¤", "æ¨“æ¢¯é–“"], ans: "åœè»Šå ´" },
            { q: "é›»å½±ä¸­å‡ºç¾çš„è£åˆ¤æ˜¯èª°é£¾æ¼”çš„ï¼Ÿ", options: ["é„­ç¥–", "é»ƒä¸€å±±", "è°·å¾·æ˜­", "æåŠ›æŒ"], ans: "é„­ç¥–" },
            { q: "ä½•é‡‘éŠ€ç”¨äº†ä»€éº¼æˆ°è¡“æ‹–å»¶å¤§å¸«å…„ï¼Ÿ", options: ["å¿ƒç†æˆ°è¡“", "è£æ­»", "ä¸€ç›´è·‘", "æŠ•é™"], ans: "å¿ƒç†æˆ°è¡“" },
            { q: "é€™éƒ¨é›»å½±çš„å°æ¼”æ˜¯èª°ï¼Ÿ", options: ["æåŠ›æŒ", "ç‹å®¶è¡›", "æœçªå³°", "å¾å…‹"], ans: "æåŠ›æŒ" },
            { q: "ã€Œæ”¾é–‹å€‹å¥³ä»”ï¼ã€é€™å¥è©±æ˜¯èª°èªªçš„ï¼Ÿ", options: ["è’™é¢åŠ è²è²“", "è­¦å¯Ÿ", "é»‘ç†Š", "é˜¿éº—"], ans: "è’™é¢åŠ è²è²“" },
            { q: "æ¦®è¨˜å†°å®¤çš„è€é—†ï¼ŒçœŸå¯¦èº«ä»½æ˜¯ï¼Ÿ", options: ["åæ¸…å¾©æ˜ç¾©å£«", "å°‘æ—é«˜åƒ§", "é€€å½¹æ®ºæ‰‹", "ç‰¹ç´šå»šå¸«"], ans: "åæ¸…å¾©æ˜ç¾©å£«" },
            { q: "é”å”æ•™ä½•é‡‘éŠ€ç·´éµç ‚æŒï¼Œæ˜¯ç”¨ä»€éº¼ç‚’ï¼Ÿ", options: ["ç³–ç‚’æ —å­", "ç´…è±†", "æ²™å­", "éµç ‚"], ans: "ç³–ç‚’æ —å­" },
            { q: "å¤§å¸«å…„èªªé˜¿éº—å–œæ­¡çš„å¼µå­¸å‹æ˜¯ï¼Ÿ", options: ["é£Ÿå±å•¦", "æ­Œç¥", "æ™®é€šäºº", "å¸¥å“¥"], ans: "é£Ÿå±å•¦" },
            { q: "æœ€å¾ŒæŠ½çç®±è£¡çš„çå“æ˜¯ä»€éº¼ï¼Ÿ", options: ["æ ¹æœ¬æ²’æœ‰çå“", "è³“å£«è»Š", "ç’°éŠä¸–ç•Œ", "ä¸€æ£Ÿæˆ¿å­"], ans: "æ ¹æœ¬æ²’æœ‰çå“" },
            { q: "ä½•é‡‘éŠ€èŠ±å…‰ç©è“„è·Ÿé”å”å­¸åŠŸå¤«ï¼Œç¸½å…±èŠ±äº†å¤šå°‘éŒ¢ï¼Ÿ", options: ["å¹¾è¬å¡Š", "å¹¾ç™¾å¡Š", "å¹¾åè¬", "å…è²»"], ans: "å¹¾è¬å¡Š" },
            { q: "é»‘ç†Šä¸»å°‡æ˜¯å“ªå€‹éƒ¨é–€çš„ä¸»å°‡ï¼Ÿ", options: ["æŸ”é“éƒ¨", "åŠé“éƒ¨", "è¥¿æ´‹æ‹³éƒ¨", "è·†æ‹³é“éƒ¨"], ans: "æŸ”é“éƒ¨" },
            { q: "é˜¿éº—é€çµ¦ä½•é‡‘éŠ€ä»€éº¼å®šæƒ…ä¿¡ç‰©ï¼Ÿ", options: ["æ‰‹éŒ¶", "å¹¸é‹æ‰‹ç’°", "åœå·¾", "è¦ªå»"], ans: "æ‰‹éŒ¶" },
            { q: "é”å”èªªè¦ç·´æˆç„¡æ•µé¢¨ç«è¼ªï¼Œå¿…é ˆåˆ©ç”¨ä»€éº¼ï¼Ÿ", options: ["åœ°å¿ƒå¼•åŠ›", "å¼·å¤§å…§åŠ›", "é¢¨åŠ›", "é›»åŠ›"], ans: "åœ°å¿ƒå¼•åŠ›" },
            { q: "é›»å½±ä¸­ï¼Œèª°å®¢ä¸²æ¼”å‡ºé€ç¥¨çµ¦ä½•é‡‘éŠ€ï¼Ÿ", options: ["å¼µå­¸å‹", "åŠ‰å¾·è¯", "é»æ˜", "éƒ­å¯ŒåŸ"], ans: "å¼µå­¸å‹" },
            { q: "ä½•é‡‘éŠ€ç‚ºäº†å‘é˜¿éº—è­‰æ˜è‡ªå·±ï¼Œå»æŒ‘æˆ°äº†èª°ï¼Ÿ", options: ["é»‘ç†Š", "æ ¡é•·", "é”å”", "é€å ±ç”Ÿ"], ans: "é»‘ç†Š" },
            { q: "é”å”çš„é›œè²¨åº—é–€å£æ›è‘—ä»€éº¼å­—ï¼Ÿ", options: ["æ‡¦å¤«æ•‘æ˜Ÿ", "æ¿Ÿä¸–ç‚ºæ‡·", "å¦™æ‰‹å›æ˜¥", "æœ‰æ•™ç„¡é¡"], ans: "æ‡¦å¤«æ•‘æ˜Ÿ" },
            { q: "ä½•é‡‘éŠ€æœ€å¾Œç”¨ä»€éº¼æ‹›å¼æ‰“æ•—å¤§å¸«å…„ï¼Ÿ", options: ["ç„¡æ•µé¢¨ç«è¼ª", "åå­—å›º", "é–å–‰", "å¤§å¹¸é‹"], ans: "ç„¡æ•µé¢¨ç«è¼ª" },
            { q: "é€™éƒ¨é›»å½±ä¸Šæ˜ æ–¼å“ªä¸€å¹´ï¼Ÿ", options: ["1994", "1990", "1998", "2000"], ans: "1994" }
        ];

        let currentQIndex = 0;
        let score = 0;
        let currentQuestions = [];

        function followIG() {
            window.open('https://www.instagram.com/kinpletw/', '_blank');
            const followBtn = document.getElementById('btn-follow-ig');
            const startBtn = document.getElementById('btn-start-game');
            followBtn.innerHTML = "âœ… é©—è­‰æˆåŠŸï¼";
            followBtn.disabled = true;
            followBtn.style.background = "#2ecc71"; 
            setTimeout(() => {
                followBtn.classList.add('hidden');
                startBtn.classList.remove('hidden');
            }, 1000);
        }

        function fireConfetti() {
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            const pieces = [];
            const colors = ['#f1c40f', '#e74c3c', '#3498db', '#ffffff'];

            for (let i = 0; i < 150; i++) {
                pieces.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    size: Math.random() * 10 + 5,
                    speed: Math.random() * 5 + 2,
                    angle: Math.random() * 360
                });
            }

            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                let active = false;
                pieces.forEach(p => {
                    p.y += p.speed;
                    p.angle += 2;
                    if (p.y < canvas.height) {
                        active = true;
                        ctx.fillStyle = p.color;
                        ctx.save();
                        ctx.translate(p.x, p.y);
                        ctx.rotate(p.angle * Math.PI / 180);
                        ctx.fillRect(-p.size/2, -p.size/2, p.size, p.size);
                        ctx.restore();
                    }
                });
                if (active) requestAnimationFrame(draw);
            }
            draw();
        }

        function shuffle(array) {
            return array.sort(() => Math.random() - 0.5);
        }

        function startGame() {
            score = 0;
            currentQIndex = 0;
            currentQuestions = shuffle([...pool]).slice(0, TOTAL_QUESTIONS_TO_ASK).map(item => {
                let opts = shuffle([...item.options]);
                return { q: item.q, options: opts, correctIndex: opts.indexOf(item.ans) };
            });

            document.getElementById('screen-welcome').classList.add('hidden');
            document.getElementById('screen-game').classList.remove('hidden');
            loadQuestion();
        }

        function loadQuestion() {
            if (currentQIndex >= TOTAL_QUESTIONS_TO_ASK) {
                endGame();
                return;
            }

            const qData = currentQuestions[currentQIndex];
            document.getElementById('q-current').innerText = currentQIndex + 1;
            document.getElementById('q-progress').style.width = `${((currentQIndex)/TOTAL_QUESTIONS_TO_ASK)*100}%`;
            document.getElementById('q-text').innerText = qData.q;

            const box = document.getElementById('options-box');
            box.innerHTML = '';

            qData.options.forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.className = 'btn btn-option';
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(idx, qData.correctIndex, btn);
                box.appendChild(btn);
            });
        }

        function checkAnswer(selected, correct, btn) {
            const allBtns = document.querySelectorAll('.btn-option');
            allBtns.forEach(b => b.disabled = true);

            if (selected === correct) {
                btn.classList.add('correct');
                score++;
            } else {
                btn.classList.add('wrong');
                allBtns[correct].classList.add('correct');
                document.getElementById('game-card').classList.add('shake');
                setTimeout(() => document.getElementById('game-card').classList.remove('shake'), 500);
            }

            setTimeout(() => {
                currentQIndex++;
                loadQuestion();
            }, 1000);
        }

        function endGame() {
            document.getElementById('screen-game').classList.add('hidden');
            
            if (score >= PASS_THRESHOLD) {
                fireConfetti();
                document.getElementById('pass-score').innerText = score;
                document.getElementById('screen-wheel').classList.remove('hidden');
            } else {
                document.getElementById('fail-score').innerText = score;
                document.getElementById('screen-fail').classList.remove('hidden');
            }
        }

        function spinWheel() {
            const btn = document.getElementById('spin-btn');
            if(btn.disabled) return;
            btn.disabled = true; btn.innerText = "ğŸŒªï¸ ç„¡æ•µé¢¨ç«è¼ªå•Ÿå‹•...";

            const wheel = document.getElementById('wheel');
            // è®“å®ƒè½‰ä¹…ä¸€é»ï¼Œå¢åŠ æœŸå¾…æ„Ÿ
            const randomDeg = Math.floor(Math.random() * 360) + 2500;
            wheel.style.transform = `rotate(${randomDeg}deg)`;

            // 4ç§’å¾Œç›´æ¥è·³è½‰åˆ°è¼¸å…¥åå­—
            setTimeout(() => {
                showInput();
            }, 4000);
        }

        function showInput() {
            document.getElementById('screen-wheel').classList.add('hidden');
            document.getElementById('screen-input').classList.remove('hidden');
        }

        function generateCertificate() {
            const name = document.getElementById('user-name').value;
            if(!name) { 
                alert("å¤§ä¿ ï¼Œè«‹ç•™ä¸‹æ‚¨çš„å¤§åï¼"); 
                document.getElementById('user-name').focus();
                return; 
            }

            document.getElementById('cert-name').innerText = name;
            
            const today = new Date();
            document.getElementById('cert-date').innerText = `${today.getFullYear()}/${today.getMonth()+1}/${today.getDate()}`;

            document.getElementById('screen-input').classList.add('hidden');
            document.getElementById('screen-cert').classList.remove('hidden');
            fireConfetti(); // å†æ¬¡æ…¶ç¥
        }
    </script>
</body>
</html>